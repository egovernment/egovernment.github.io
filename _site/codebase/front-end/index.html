<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>eRegistrations - Front-end</title>
  <meta name="description" content="Help for eRegistrations
">

  <link rel="shortcut icon" href="/favicon.ico?v=2" type="image/x-icon">

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/theDocs.all.min.css">
  <link rel="stylesheet" href="/assets/css/skin-teal.css">
  <link rel="stylesheet" href="/assets/css/custom.css">

  <!-- FONTS -->
  <link href="//fonts.googleapis.com/css?family=Raleway:100,300,400,500%7CLato:300,400" rel="stylesheet" type="text/css">

  <!-- OTHERS -->
  <link rel="canonical" href="help.eregistrations.org/codebase/front-end/">
  <link rel="alternate" type="application/rss+xml" title="eRegistrations" href="help.eregistrations.org/feed.xml">
</head>


  <body>

    <header class="site-header sticky navbar-fullwidth navbar-transparent">

  <!-- Top navbar & branding -->
  <nav class="navbar navbar-default">
    <div class="container">

      <!-- Toggle buttons and brand -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar">
          <span class="glyphicon glyphicon-option-vertical"></span>
        </button>

        <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="navbar-brand" href="/">eRegistrations</a>
      </div>
      <!-- END Toggle buttons and brand -->

      <!-- Top navbar -->
      <div id="navbar" class="navbar-collapse collapse" aria-expanded="true" role="banner">
        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="/">Documentation</a></li>
          <li class=""><a href="/search">Search</a></li>
        </ul>
      </div>
      <!-- END Top navbar -->
    </div>
  </nav>
  <!-- END Top navbar & branding -->

  <!--
  
  -->

</header>


    <main class="container-fluid">
    	<div class="row">
    		
    		<aside class="col-lg-2 col-md-3 col-sm-3 sidebar">
    			<ul class="sidenav dropable sticky">
    			 <li class=""><a href="/">Overview</a></li> 
    			 <li class=""><a href="/installation">Installation</a></li>
                 <li class=""><a href="/architecture-overview">Architecture overview</a></li>
                 <li>
                    <a href="#" class="has-child active open">Codebase</a>
                    <ul>
                        <li class="">
                            <a href="/codebase/server-side-services">Server-side services</a>
                        </li>
                        <li class="">
                            <a href="/codebase/client-side-services">Client-side services</a>
                        </li>
                        <li class="">
                            <a href="/codebase/model">Model</a>
                        </li>
                        <li class="active">
                            <a href="/codebase/front-end">Front-end (CSS & HTML)</a>
                        </li>
                        <li class="">
                            <a href="/codebase/public-pages">Public pages</a>
                        </li>
                    </ul>
                 </li>
                 <li class=""><a href="/tutorial">Configuration tutorial</a></li>
                 <li>
	                 <a href="#" class="has-child ">How to...</a>
	                    <ul>
	                        <li class="">
	                            <a href="/how-to/add-a-registration-to-a-service/">101 - add a registration to a service</a>
	                        </li>
	                        <li class="">
	                            <a href="/how-to/modify-the-name-of-a-registration">102 - modify the name of a registration</a>
	                        </li>
	                        <li class="">
	                            <a href="/codebase/model">Model</a>
	                        </li>
	                        <li class="active">
	                            <a href="/codebase/front-end">Front-end (CSS & HTML)</a>
	                        </li>
	                        <li class="">
	                            <a href="/codebase/public-pages">Public pages</a>
	                        </li>
	                    </ul>
                 </li>
    			</ul>
    		</aside>

    		<article class="col-lg-10 col-md-9 col-sm-9 main-content" role="main" id="content">
    			<h1 id="css-organization-and-conventions-style-guide">CSS organization and conventions style guide</h1>

<h2 id="introduction">Introduction</h2>

<p>Common styles for all eRegistrations system components are developed as part of <em>prototype</em> project, which can be browsed at <a href="http://proto.eregistrations.org">proto.eregistrations.org</a>.</p>

<p>Prototype project provides base HTML/CSS foundation and all common interfaces for any eRegistrations system. It’s provided in design agnostic manner, in form of tiny modules that can be used selectively in any eRegistrations system.</p>

<p>Below documentation describes how to configure markup and styles of eRegistrations system with existing modules, and also describes style guide rules up to which HTML and CSS modules were developed, and up to which future extensions or system specific components should be developed.</p>

<h3 id="how-to-adopt-this-work-in-eregistrations-system">How to adopt this work in eRegistrations system</h3>

<p>When developing new (or migrating old) eRegistrations system, all configured views markup should precisely follow one in <em>prototype</em>.</p>

<p>In first place it’s suggested to rely <em>strictly</em> prototype styles, and do not proceed with system specific design until all markup is configured properly as in prototype, and application browses well with <em>prototype</em> look.</p>

<p>After above is achieved and design for given system is ready, <em>theme</em> should be applied on top of above work. Prototype doesn’t force any specific design, so technically any design should be applicable to base foundation as provided by prototype.</p>

<p>It’s likely that given eRegistrations system will introduce some custom components or will propose other version of interfaces for existing components. In such scenario, either new (or new version of) component should be introduced to prototype, or if it feels as specific to this single system, then it should be developed in system itself.</p>

<p>Below documentation provides all necessary details needed to accomplish successful adoption.</p>

<h2 id="css-folders-and-files-organization">CSS folders and files organization</h2>

<p>All CSS is written and maintained in form of small modules, which then is bundled into browser ready files for configured applications.</p>

<h3 id="general-filename-conventions">General filename conventions</h3>

<p>All names of CSS files must be lowercase with tokens separated with dashes. Good: <code class="highlighter-rouge">foo-bar.css</code>, Bad: <code class="highlighter-rouge">fooBar.css</code></p>

<h3 id="location-of-prototype-css-modules">Location of prototype CSS modules</h3>

<p>All CSS modules as introduced with Prototype, are placed in <a href="https://github.com/egovernment/eregistrations/tree/master/css">/css</a> folder of eRegistrations project.</p>

<h4 id="base-modules">Base modules</h4>

<p>Base foundation style files, can be found directly in <code class="highlighter-rouge">/css</code> folder:</p>

<ul>
  <li><code class="highlighter-rouge">base.css</code> - Reset and base system wide styles</li>
  <li><code class="highlighter-rouge">form.css</code> - Styles related to form controls. It also contains all needed styles for form interfaces as generated by <a href="https://github.com/medikoo/dbjs-dom">dbjs dom</a> bindings</li>
  <li><code class="highlighter-rouge">table.css</code> - Base styles for tables</li>
  <li><code class="highlighter-rouge">print-base.css</code> - Reset and base styles for print views</li>
  <li><code class="highlighter-rouge">print-prototype-reset.css</code> - Temporary hack related to fact that at this point all print pages are also loaded with regular application css file. This files resets all eventual side effects of having application css file loaded.</li>
</ul>

<h4 id="components">Components</h4>

<p>All other styles are organized as components, and can be found in <a href="https://github.com/egovernment/eregistrations/tree/master/css/components">/css/components</a> folder.</p>

<p>Some of the components are documented in below part of this documentation. For those not documented, their purpose with styles and markup should be self explanatory.</p>

<h4 id="legacy-degradation-modules">Legacy degradation modules</h4>

<p>There’s also <a href="https://github.com/egovernment/eregistrations/tree/master/css/legacy">/css/legacy</a> folder which contains all eventual <em>degradation</em> rules which apply <strong>only</strong> to legacy browsers (ones that are served with static version of pages and not single page application program). It applies to IE10 and lower, IE mobile, and some very old versions of other engines.</p>

<p>Idea behind degradation rules: e.g. if there’s a component styled normally with flexbox, that is not supported in older IE engines. Then in legacy folder we may create corresponding component file (it’s name and location must exactly reflect location within <code class="highlighter-rouge">/css</code> folder) that provides alternative fixed rules for this component, so given part of interface remain functional and accessible in outdated engine as well.</p>

<h3 id="location-of-eregistrations-system-specific-css-modules">Location of eRegistrations system specific CSS modules</h3>

<p>Same as in case of prototype, they should be placed in <code class="highlighter-rouge">/css</code> folder of project, e.g. see <a href="https://github.com/egovernment/eregistrations-salvador/tree/master/css">/css</a> folder of ELS eRegistrations project.</p>

<p>What should land here is usually <em>theme</em> styles that apply specific system design, and eventual system specific components.</p>

<p>In <a href="https://github.com/egovernment/eregistrations-salvador/tree/master/css">ELS project</a> three different theme files were created to differentiate between public, part A, and part B applications. There’s also base <code class="highlighter-rouge">theme.css</code> files that’s included in all cases. This organization should also work well for any other eRegistrations system.</p>

<p>Same here, any eventual legacy <em>degradation</em> rules should be placed in corresponding files within <code class="highlighter-rouge">/css/legacy</code> folder.</p>

<h2 id="css-modules-bundle-configuration">CSS modules bundle configuration</h2>

<h3 id="application-modules-bundle">Application modules bundle</h3>

<p>For any application within eRegistrations system (where application is e.g. <code class="highlighter-rouge">public</code>, <code class="highlighter-rouge">user</code>, <code class="highlighter-rouge">user-submitted</code>) one major CSS bundle is created that includes css code for all used components.</p>

<p>Content of a bundle is configured per application, and takes place in <code class="highlighter-rouge">css.index</code> file placed in <code class="highlighter-rouge">client</code> folder of application. See e.g. <a href="https://github.com/egovernment/eregistrations-salvador/blob/master/user/client/css.index">css.index</a> configuration for <em>user</em> application of ELS system.</p>

<p>In index all files that should be concatenated into result bundle should be listed in desired order.</p>

<p>Creation of index file, is <strong>all</strong> what needs to be done for bundle to be generated automatically by the framework.</p>

<p>To have generated CSS file loaded with application, it needs to be included in <code class="highlighter-rouge">index.html</code> file of application, which is placed in <code class="highlighter-rouge">view/{applicationName}</code> folder. Bundle name automatically reflects application name, so e.g. for <em>user</em> application it’ll be <code class="highlighter-rouge">user.css</code>. See e.g. css bundle linked within <a href="https://github.com/egovernment/eregistrations-salvador/blob/master/view/user/index.html#L28">index.html</a> for <em>user</em> application of ELS system.</p>

<h3 id="print-modules-bundle">Print modules bundle</h3>

<p>Exactly same way css index should be configured for print pages. In this case index is named <code class="highlighter-rouge">css-print.index</code> , see e.g. <a href="https://github.com/egovernment/eregistrations-salvador/blob/master/user/client/css-print.index">css-print.index</a> configuration for <em>user</em> application of ELS system.</p>

<p>As with major index file, generated CSS needs to be linked within application manually. However as this time we don’t want to have print styles loaded for regular pages, we reference it directly within configured print views, as e.g. it’s done in this <a href="https://github.com/egovernment/eregistrations-salvador/blob/master/view/user/imprimir-costos.js#L25">print view</a> of ELS project.</p>

<h3 id="legacy-modules-bundle">Legacy modules bundle</h3>

<p>There’s no additional work needed to assure that legacy <em>degradation</em> rules are loaded for legacy engines. Bundle is generated automatically on basis of main <code class="highlighter-rouge">css.index</code> and CSS bundle file is linked automatically in html via static pages generator.</p>

<p>However, what’s important, there’s no special legacy handling configured for print views. Those views resemble very simple layout structures and should be styled by default as accessible also in old engines.</p>

<h2 id="css-style-guide">CSS style guide</h2>

<h3 id="no-ids-in-selectors">No ID’s in selectors</h3>

<p>Id’s specificity weight is very high therefore we decided not to rely on them.
If id’s appear in markup their usage is reserved strictly for JS needs.</p>

<h3 id="class-naming-conventions">Class naming conventions</h3>

<p>All introduced class names must be lowercase, with tokens separated with dashes. Good: <code class="highlighter-rouge">foo-bar</code>, Bad: <code class="highlighter-rouge">fooBar</code>, <code class="highlighter-rouge">foo_bar</code></p>

<p>When deciding on new class names we take functional semantic approach, and not presentational. e.g.
* Good <code class="highlighter-rouge">sidebar</code>, Bad: <code class="highlighter-rouge">column-2</code>. 
* Good <code class="highlighter-rouge">error-message</code>, Bad: <code class="highlighter-rouge">red-box</code></p>

<p>Whenever you’ll introduce new class names, it’ll be either cause of new component is introduced, or you customise existing component with additional class. Technically there should be no other case, if you think you approached one, please consult with other colleagues first.</p>

<p>When classifying components we follow some <a href="http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/">BEM conventions</a>. While we do not follow it’s sophisticated class naming rules, we keep to the idea that all dependent sub component/state classes should be prefixed with main component name, and just by this single class referred further in CSS selectors.</p>

<p>e.g. we have <a href="http://proto.eregistrations.org/guide/">steps menu</a> component that’s displayed in user interface which is visible after user registers to the system. It is named: <code class="highlighter-rouge">user-steps-menu</code>, it becomes both, name of the class for the component and also the name of a CSS file which contains related rules.</p>

<p>Internally all sub component/state classes, are prefixed with <code class="highlighter-rouge">users-steps-menu</code>, e.g. <code class="highlighter-rouge">users-steps-menu-wrapper</code>, <code class="highlighter-rouge">users-steps-menu-start-step</code>. Same logic should be maintained when updating or introducing new components.</p>

<h3 id="minimal-selectors">Minimal selectors</h3>

<p>Selectors introduced in CSS files, must remain as minimal as possible.</p>

<h3 id="graceful-degradation-no-old-school-hacks">Graceful degradation, no old school hacks</h3>

<p><strong>In first place we style for modern engines, no look backs.</strong></p>

<p>It’s not allowed to use <code class="highlighter-rouge">float</code> hacks to compose layout. Instead rely on <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes">flexbox</a> or <code class="highlighter-rouge">display: inline-block</code>, or <code class="highlighter-rouge">display: table</code>. If you need rounded corners, rely strictly on <code class="highlighter-rouge">border-radius</code>, for gradients, use dedicated background properties. All of this features are already supported in all latest versions of major engines.</p>

<h4 id="handling-older-engines">Handling older engines</h4>

<p>We want to support old engines as far as IE8. Still, it’s only about making the application usable and fully functional, we do not strive to make it look exactly same as on modern engine.</p>

<p>To introduce necessary tweaks to old engines, we configured mechanism that allows to add <em>degradation</em> rules for components for which regular styles break layout in old engines. See <em>Legacy degradation modules</em> and <em>Legacy modules bundle</em> sections to see how to apply them. Over there it’s allowed to rely on <code class="highlighter-rouge">float</code> if needed. Still it needs to be minimal, and should be strictly about addressing layout or significant usability breakages. Do not try to try to make round corners for IE, or introduce other not natively supported sugar for this engines.</p>

<h3 id="other-important-rules-guarded-with-lint-utility">Other important rules guarded with lint utility</h3>

<p>CSS code is validated with <a href="https://github.com/medikoo/csslint-next#csslint-next">CSS lint</a> utility.
It checks the code against most of <a href="https://github.com/CSSLint/csslint/wiki/Rules">preconfigured rules</a> and some <a href="https://github.com/medikoo/csslint-next#additional-rules">whitespace rules</a> added by us.</p>

<p>We had reasons to opt out of some rules, list of it can be found in project <a href="https://github.com/egovernment/eregistrations/blob/master/.lint#L5-L11">.lint</a> configuration.</p>

<p>Every eRegistrations system should have <a href="https://github.com/egovernment/eregistrations/blob/master/package.json#L37-L39">CSS lint tasks</a> configured, and eventual CSS lint cofiguration added to <code class="highlighter-rouge">.lint</code> files.</p>

<h3 id="dealing-with-vendor-prefixes">Dealing with vendor prefixes</h3>

<p>There’s the <a href="https://github.com/postcss/autoprefixer">Autoprefixer</a> utility configured with the bundler. So it’s fine to use only standard names in CSS files, they will be automatically resolved to all needed vendor prefixes.</p>

<h3 id="css-variables">CSS Variables</h3>

<p>CSS variables are used to address common colors or dimension settings that repeat across rules.
They’re resolution is configured within a bundler with help of <a href="https://github.com/medikoo/css-aid#variables">css-aid</a> utility</p>

<h3 id="vertical-rhythm">Vertical Rhythm</h3>

<p>All page layouts are composed with respect to vertical rhythm. More information on VR can be found in this <a href="http://24ways.org/2006/compose-to-a-vertical-rhythm/">article</a>.</p>

<p>Base line height of our VR setup is <strong>22px</strong></p>

<p>In development we confirm VR with help of browser extensions, e.g. GridFox on Firefox or PixelPerfect for Chrome (for this use <a href="https://github.com/egovernment/eregistrations/blob/master/css/grid-22.png">grid-22.png</a> image)</p>

<p>It’s allowed to introduce small exceptions to the rule (e.g. show input hint closer to input box), but overall vertical rhythm of a page must remain maintained.</p>

<p>It’s also ok, to ignore eventual browser bugs which cause small deviations from vertical rhythm. Still for Google Chrome and Mozilla Firefox browsers we strive for <em>perfection</em>.</p>

<h3 id="responsiveness">Responsiveness</h3>

<p>At this point eRegistrations application layout is configured for both desktop and mobile views. Switch to mobile version occurs when screen resolution is less than 640px.</p>

<p>Styles specific to mobile view, can be applied via <a href="https://github.com/egovernment/eregistrations/blob/e18d7068362e6109923871f49c6079ee396e7b60/css/form.css#L455">media-queries</a>.</p>

<p>Minimum mobile resolution is set to 320px.</p>

<p>Control of responsive display is mostly done by changing <em>flex-wrap</em> property set to <em>wrap</em> in mobile view.</p>

<p>Example can be found <a href="https://github.com/egovernment/eregistrations/blob/master/css/components/container-with-nav.css#L36-L39">here</a>.</p>

<h3 id="browsers-we-support">Browsers we support</h3>

<p>We support all major engines (Chrome, Firefox, Safari, IE, Opera) on both desktop and mobile in their latest versions. Via additional legacy degradation styles we maintain application as fully usable and functional for all engines which can’t run application in SPA mode. Our support goes lowest to IE8 browser.</p>

<h2 id="components-1">Components</h2>

<p>Below is list of notes for some components for which we felt some additional documentation is needed.
For all others markup and styles should be self explanatory.</p>

<h3 id="responsive-tables">Responsive tables</h3>

<p>Responsive table flips its header to be first column for every row of table. From the code perspective, this can be achieved simply by adding property <code class="highlighter-rouge">responsive: true</code> on a table.</p>

<p>Example can be found <a href="https://github.com/egovernment/eregistrations/blob/master/view/prototype/user-submitted.js#L39">here</a></p>

<h3 id="font-icons">Font icons</h3>

<p><strong>Font Awesome</strong> is used in eRegistrations for icons. Only icons that we actually use are configured. Any new icons need to be added to icons file: <em>css/components/fa.css</em>.</p>

<p><strong>Adding new icon</strong> can be made by selecting new icon from <a href="https://fortawesome.github.io/Font-Awesome/cheatsheet/">this list</a> and adding class for this font in <em>css/components/fa.css</em></p>

<p><strong>Example</strong> - adding <em>automobile icon</em> requires adding its class and :before pseudo-element:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.fa-automobile {
	width: 1.2em;
}
.fa-automobile:before {
	content: "\f1b9";
}
</code></pre>
</div>
<p>Then in templates a element need to be added:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>span({ class: 'fa fa-automobile' }, "Car")
</code></pre>
</div>
<p>“Car” text will not be shown when CSS is applied.</p>

<h3 id="tooltips-optional-hints">Tooltips (optional hints)</h3>

<p>Tooltips are small, black, popup windows that are displayed on hover over significant element. 
Our component is developed on top of vendor library - <a href="http://kushagragour.in/lab/hint/">hint.css</a>.</p>

<p>Any element which needs to have a tooltip has to be given <strong><em>hint-optional</em></strong> class. To position hint, at least one of the position classes need to be added:</p>

<p><strong><em>hint-optional-top</em></strong>,<br />
<strong><em>hint-optional-bottom</em></strong>,<br />
<strong><em>hint-optional-left</em></strong>,<br />
<strong><em>hint-optional-right</em></strong></p>

<p>The <strong><em>tooltip text</em></strong> has to be given using the <strong><em>data-hint attribute</em></strong> on that 
element.</p>

<p>Example can be found <a href="https://github.com/egovernment/eregistrations/blob/master/view/prototype/user-submitted.js#L56-L58">here</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>span({ class: 'hint-optional hint-optional-left', 
		'data-hint': "Lorem ipsum dolor sit amet" },
	"Lorem ipsum"
	);

</code></pre>
</div>

<h3 id="freeform-text">Freeform text</h3>

<p>It’s the component we use, where we inject multi-paragraph i18n messages with markdown support.</p>

<p>It provides sensible styles to lists, paragraphs etc. for such scenario.</p>

<p>Example can be found <a href="https://github.com/egovernment/eregistrations-salvador/blob/a36fa4fb7b4bcf229bb70121ee6221fb0907dd02/view/company/index.js#L275">here</a>.</p>

<h3 id="disabler">Disabler</h3>

<p>Disabler is a component, that can cover all other components under partially transparent background, and make all of them not clickable</p>

<p>Disabler requires a wrapper component, containing all  elements that should be disabled. This wrapper component needs to have <strong><em>disabler-range</em></strong> class.</p>

<p>Disabler requires empty <strong><em>div</em></strong> with <strong><em>disabler</em></strong> class, as first line last child element.</p>

<p>Example can be found <a href="https://github.com/egovernment/eregistrations/blob/master/view/prototype/documents.js#L11-L34">here</a>.</p>

<p>For turning on disabler, a <strong><em>disabler-active</em></strong> class needs to be added to <strong><em>disabler-range</em></strong> component.</p>

<p>Example can be found <a href="https://github.com/egovernment/eregistrations/blob/master/view/prototype/disabled-documents.js#L5">here</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>div({ class: 'disabler-range' },
	"Lorem ipsum to be disabled",
	
	div({ class: 'disabler' })
);

</code></pre>
</div>


    		</article>

    	</div>
    </main>

    <footer class="site-footer">
  <div class="container">
    <a id="scroll-up" href="#"><i class="fa fa-angle-up"></i></a>
    <div class="row">
      <div class="col-md-6 col-sm-6">
      </div>
      <div class="col-md-6 col-sm-6">
        <ul class="footer-menu">
            <li><a href="//businessfacilitation.org/eregistrations/" target="_blank">About</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

<script type="text/javascript" src="/assets/js/theDocs.all.min.js"></script>
<script type="text/javascript" src="/assets/js/custom.js"></script>


  </body>

</html>
